function checkTicket(){if($("#checkTicketForm").data("formValidation").isValid()){var n=$("#ticketNumber").val(),t=document.location.port?":"+document.location.port:"",i=document.location.protocol+"//"+document.location.hostname+t+"/restApi/v1/GetTicket/"+n,r={number:n};$.ajax({url:i,type:"GET",accepts:"application/json; charset=utf-8",contentType:"application/json",data:JSON.stringify(r),dataType:"json",success:function(n){var t=$("#resultModal");n.IsSuccess?n.IsWinning?t.find(".modal-body").text("Поздравляем! Ваш билет выигрышный!"):t.find(".modal-body").text("Увы, вы ничего не выиграли."):t.find(".modal-body").text(n.Message);t.modal("show")}})}}function initValidation(){$("#checkTicketForm").formValidation({framework:"bootstrap",fields:{ticketNumber:{validators:{callback:{callback:function(n){return $("#ticketNumber").val(n.toUpperCase()),$("#checkBtn").prop("disabled",!0),n===""?{valid:!1,message:"Введите номер билета"}:n.length!==11?{valid:!1,message:"Введите номер билета в формате XXX-XXXXXXX"}:($("#checkBtn").prop("disabled",!1),!0)}}}}}}).on("click",'[name="checkBtn"]',function(){$("#checkTicketForm").data("formValidation").revalidateField("ticketNumber");checkTicket()})}$(document).ready(function(){$("#checkBtn").prop("disabled",!0);$("#ticketNumber").mask("DDD-AAAAAAA",{placeholder:"Введите номер билета в формате XXX-XXXXXXX",clearIfNotMatch:!0,translation:{A:{pattern:/[A-Za-z0-9]/},D:{pattern:/[0-9]/}}});initValidation()});